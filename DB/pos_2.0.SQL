--   -------------------------------------------------- 
--   Generated by Enterprise Architect Version 7.0.813
--   Created On : Lunes, 16 Marzo, 2009 
--   DBMS       : MySql 
--   -------------------------------------------------- 



--  Drop Tables, Stored Procedures and Views 
DROP TABLE IF EXISTS PROVEEDORES
;
DROP TABLE IF EXISTS POS_VENTA_DETALLE_PAGO
;
DROP TABLE IF EXISTS POS_VENTA_DETALLE
;
DROP TABLE IF EXISTS POS_VENTA
;
DROP TABLE IF EXISTS POS_USUARIO
;
DROP TABLE IF EXISTS POS_PARAMETROS
;
DROP TABLE IF EXISTS POS_LISTA_PRECIO
;
DROP TABLE IF EXISTS POS_INVENTARIO
;
DROP TABLE IF EXISTS POS_FORMAS_PAGO
;
DROP TABLE IF EXISTS POS_CONVENIOS
;
DROP TABLE IF EXISTS CATEGORIAS
;



--  Create Tables 
CREATE TABLE PROVEEDORES
(
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID proveedor',
	N_Proveedor VARCHAR(50) NOT NULL COMMENT 'Nombre Proveedor',
	PRIMARY KEY (ID)
)  COMMENT='Maestro Proveedores'
;


CREATE TABLE POS_VENTA_DETALLE_PAGO
(
	ID_VENTA INTEGER NOT NULL COMMENT 'ID, FK Referencia a ID en POS_VENTA',
	TIPO_PAGO INTEGER COMMENT 'ID Tipo de pago, Efectivo, tarjeta, cheque, etc...',
	FECHA_VENCIMIENTO VARCHAR(8) COMMENT 'Fecha, vencimiento del documento',
	BANCO VARCHAR(20) COMMENT 'Nombre de la institucion bancaria',
	VALOR_PAGADO INTEGER COMMENT 'Valor pagado con la forma de pago seleccionada',
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID_Tabla',
	PRIMARY KEY (ID)
)  COMMENT='Detalle por articulo de el pago para una operación'
;


CREATE TABLE POS_VENTA_DETALLE
(
	ID_VENTA INTEGER NOT NULL COMMENT 'ID, FK Referencia a ID en POS_VENTA',
	CODIGO VARCHAR(20) COMMENT 'Codigo de articulo',
	CANTIDAD INTEGER COMMENT 'Cantidad de articulos',
	PRECIO_UNITARIO INTEGER COMMENT 'Precio Unitario',
	NETO INTEGER COMMENT 'Valor sin IVA',
	IVA INTEGER COMMENT 'Impuesto al Valor Agregado',
	TOTAL INTEGER COMMENT 'Total en la linea',
	DESCUENTO INTEGER COMMENT 'Descu ento aplicado al articulo',
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID Tabla',
	PRIMARY KEY (ID)
)  COMMENT='Detalle por articulo de venta.'
;


CREATE TABLE POS_VENTA
(
	ID INTEGER NOT NULL AUTO_INCREMENT COMMENT 'ID de la venta,identificacion unica PK',
	TIPO_VENTA INTEGER COMMENT 'ID Tipo de movimiento, Venta Normal, Venta Manual etc..',
	NUMERO INTEGER COMMENT 'Numero de Boleta, Docuemnto...',
	USR_CAJ INTEGER COMMENT 'ID Cajera',
	RUT_CLIENTE VARCHAR(20) COMMENT 'Cliente, descuentos, registro, etc...',
	USR_VEN INTEGER COMMENT 'ID Vendedora',
	FECHA VARCHAR(8) COMMENT 'Fecah del movimiento con formato AAAAMMDD',
	HORA VARCHAR(4) COMMENT 'Hora del Movimiento con formato HHMM',
	VALOR_TOTAL INTEGER COMMENT 'Valor total de la compra',
	BORRADOR VARCHAR(1) DEFAULT * COMMENT 'Indica si la operacion es borrador o no con un ''*''',
	PRIMARY KEY (ID)
)  COMMENT='Encabezado de venta'
;


CREATE TABLE POS_USUARIO
(
	ID INTEGER NOT NULL,
	USUARIO VARCHAR(15) COMMENT 'Para el login',
	PASSWORD VARCHAR(15),
	TIPO_ACCESO VARCHAR(20),
	NOMBRE VARCHAR(50) COMMENT 'Nombre vendedor',
	PRIMARY KEY (ID)
) 
;


CREATE TABLE POS_PARAMETROS
(
	IVA DECIMAL(3,2) NOT NULL COMMENT 'Valor del IVA',
	N_SUCURSAL INTEGER NOT NULL COMMENT 'Numero sucursal',
	NO_SUCURSAL VARCHAR(50) NOT NULL COMMENT 'Nombre Sucursal',
	DIRECCION VARCHAR(100) NOT NULL COMMENT 'Direccion sucursal',
	LISTA_PRECIO INTEGER NOT NULL COMMENT 'Numero de lista de precio a utilizar por el local',
	NO_DOCTO INTEGER COMMENT 'Ultimo numero boleta',
	UNIQUE (N_SUCURSAL)
)  COMMENT='Parametros base del sistema'
;


CREATE TABLE POS_LISTA_PRECIO
(
	ID INTEGER NOT NULL,
	CODIGO VARCHAR(20) COMMENT 'Codigo Articulo',
	DESCRIPCION VARCHAR(50) COMMENT 'Descripcion Articulo',
	NETO INTEGER COMMENT 'Costo Neto',
	COSTO INTEGER COMMENT 'Precio Costo',
	COD_BARRAS VARCHAR(13) COMMENT 'Cod. barra',
	STATUS VARCHAR(1) COMMENT 'Si esta habilitado para cambio',
	ID_PROVEEDOR INTEGER COMMENT 'ID proveedor',
	CATEGORIA_1 INTEGER COMMENT 'ID CATEGORIA_1',
	CATEGORIA_2 INTEGER COMMENT 'ID CATEGORIA_2',
	CATEGORIA_3 INTEGER COMMENT 'ID CATEGORIA_3',
	CATEGORIA_4 INTEGER COMMENT 'ID CATEGORIA_4',
	COD_PROVEEDOR VARCHAR(50) COMMENT 'Codigo proveedor',
	FECHA_MAX_CAMBIO VARCHAR(8) COMMENT 'Fecha maxima cambio',
	PRIMARY KEY (ID)
)  COMMENT='Lista de precio, maestro articulos'
;


CREATE TABLE POS_INVENTARIO
(
	ID INTEGER NOT NULL,
	CODIGO VARCHAR(20),
	STOCK INTEGER,
	STOCK_MIN INTEGER,
	RUT_CLIENTE VARCHAR(20),
	DESCUENTO INTEGER,
	IVA INTEGER,
	NETO INTEGER,
	TOTAL INTEGER,
	PRIMARY KEY (ID)
) 
;


CREATE TABLE POS_FORMAS_PAGO
(
	ID INTEGER NOT NULL,
	CODIGO VARCHAR(20),
	DESCRIPCION VARCHAR(30),
	FRACCION INTEGER,
	PRIMARY KEY (ID)
) 
;


CREATE TABLE POS_CONVENIOS
(
	ID INTEGER NOT NULL,
	RUT VARCHAR(12),
	DESCRIPCION VARCHAR(50),
	PORC_DESCUENTO INTEGER,
	FECHA_INICIO VARCHAR(8),
	FECHA_FINAL VARCHAR(8),
	PRIMARY KEY (ID)
) 
;


CREATE TABLE CATEGORIAS
(
	ID INTEGER NOT NULL COMMENT 'ID de la categoria',
	N_CATEGORIA BIGINT NOT NULL COMMENT 'Nombre de la categoria',
	PRIMARY KEY (ID)
)  COMMENT='Descricion de todas las categorias de articulos'
;
